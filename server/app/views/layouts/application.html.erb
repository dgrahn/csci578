<!DOCTYPE html>
<html>
<head>
  <title>Server</title>
  <%= stylesheet_link_tag    'application', :media => 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

  <%= csrf_meta_tags %>
</head>
<body>

<div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <%= link_to image_tag("icon.png"), root_path, :class => "navbar-brand" %>
		
		<ul class="nav navbar-nav">
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" area-expanded="false">
					Posts
					<span class="badge"><%= Post.count %></span>
					<span class="caret"/>
				</a>
				
				<ul class="dropdown-menu" role="menu">
          <li><%= link_to "Index", posts_path %></li>
					<li><%= link_to "New", new_post_path %></li>
				</ul>
			</li>
			<li class="dropdown">
				<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" area-expanded="false">
					Users
					<span class="badge"><%= User.count %></span>
					<span class="caret"/>
				</a>
				
				<ul class="dropdown-menu" role="menu">
			    <li><%= link_to "Sign In", new_user_session_path %></li>
			    <li><%= link_to "Sign Out", destroy_user_session_path, :method => :delete %></li>
			    <li><%= link_to "New User", new_user_registration_path %></li>
			    <li><%= link_to "Edit User", edit_user_registration_path %></li>
				</ul>
			</li>
			<li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" area-expanded="false">
        	Emotions
					<span class="badge"><%= Emotion.count %></span>
					<span class="caret"/>
				</a>
        
        <ul class="dropdown-menu" role="menu">
			    <li><%= link_to "Index", emotions_path %></li>
			    <li><%= link_to "New", new_emotion_path %></li>
        </ul>
      </li>
			<li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" area-expanded="false">
        	Environments
					<span class="badge"><%= Environment.count %></span>
				  <span class="caret"/>
				</a>
        
        <ul class="dropdown-menu" role="menu">
          <li><%= link_to "Index", environments_path %></li>
          <li><%= link_to "New", new_environment_path %></li>
        </ul>
      </li>
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" area-expanded="false">
          Audiences
          <span class="badge"><%= Audience.count %></span>
          <span class="caret"/>
        </a>
        
        <ul class="dropdown-menu" role="menu">
          <li><%= link_to "Index", audiences_path %></li>
          <li><%= link_to "New", new_audience_path %></li>
        </ul>
      </li>
			      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" area-expanded="false">
          Pals
          <span class="badge"><%= Pal.count %></span>
          <span class="caret"/>
        </a>
        
        <ul class="dropdown-menu" role="menu">
          <li><%= link_to "Index", pals_path %></li>
          <li><%= link_to "New", new_pal_path %></li>
        </ul>
      </li>
		</ul>

		<%=
		  link_to "Generate",
              home_generate_path,
              :class => "btn btn-default navbar-btn" + (Generator.is_started? ? " active" : "")
    %>
    
		<div class="navbar-right">
			<% if current_user %>
			  <p class="navbar-text">Signed in a <%= current_user.name %></p>
				<%= link_to "Sign Out", destroy_user_session_path, :method => :delete, :class => "btn btn-default navbar-btn" %>
			<% else %>
		  <% end %>
		</div>
  </div>
</div>

<div class="container">
	<p class="notice"><%= notice %></p>
	<p class="alert"><%= alert %></p>
	
	<%= yield %>
</div>

</body>
</html>
